<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>javascript</title>
<style>
#resultDiv {
    height: 200px;
    border: 1px solid red;
}
</style>
</head>
<body>

	<h1>AJAX - 비동기요청 서버의 응답결과 받기 II</h1>

	<button id="btn1">button1</button>
	
	<div id="resultDiv">
	
	</div>

	<script>
        // 비동기 요청에서 서버가 보낸 응답 결과를 받으려면 서버의 응답이 왔을 때 호출될 메서드를 XMLHttpRequest에 등록한다
        btn1.onclick = function() {
            
            var xhr = new XMLHttpRequest();
            
            // 요청 상태가 변할 대 마다 호출될 메서드 등록
            // xhr.readyState : 요청상태를 가르키는 프로퍼티
            // 0: 객체 준비 
            // 1: open() 호출 후 서버에 연결된 후
            // 2: send() 호출 후 서버에 요청을 보낸 후
            // 3: 서버에서 응답결과를 받는 중
            // 4: 서버의 응답이 완료됨
            xhr.onreadystatechange = function() {
                // 우리가 관심 있는 것은 서버에서 응답을 완료한 경우다.
                // 따라서 readyState값이 4인경우만 처리하면 된다.
                
                if (xhr.readyState == 4) {
                    console.log(xhr.responseText);
                    resultDiv.innerHTML = xhr.responseText; 
                }
            };
            xhr.open('GET', 'ex01-1.jsp', true);
            xhr.send();
        }
    </script>

</body>
</html>